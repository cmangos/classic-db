-- Update RP Event for Klaven Mortwake
-- Update spawn and Waypoints from Klaven Mortwake
UPDATE creature SET position_x='-11127.023', position_y='547.55206', position_z='70.51061', orientation='0.12217' WHERE (guid='66996') AND id=7053;

SET @PATH := 7053;
DELETE FROM creature_movement_template WHERE Entry=@PATH;
INSERT INTO creature_movement_template (Entry, PathId, Point, PositionX, PositionY, PositionZ, Orientation, WaitTime, ScriptId) VALUES 
(@PATH, 0, 1, -11127.023, 547.55206, 70.51061, 100, 8000, 0),
(@PATH, 0, 2, -11126.639, 551.8031, 70.433266, 100, 26000, 705301),
(@PATH, 0, 3, -11132.797, 555.2593, 70.42202, 100,  0, 0),
(@PATH, 0, 4, -11136.433, 557.4096, 70.43819, 100,  0,  0),
(@PATH, 0, 5, -11141.278, 558.67175, 70.41653, 100,  0,  0),
(@PATH, 0, 6, -11145.746, 558.1757, 70.379524, 100,  0,  0),
(@PATH, 0, 7, -11151.536, 555.5678, 70.38759, 100,  0,  0),
(@PATH, 0, 8, -11156.048, 547.96124, 70.448845, 100,  0,  0),
(@PATH, 0, 9, -11158.312, 543.91876, 70.410866, 100,  0,  0),
(@PATH, 0, 10, -11163.021, 542.7415, 70.51954, 100, 8000, 705302),
(@PATH, 0, 11, -11161.916, 536.54095, 70.433266, 100,  0,  0),
(@PATH, 0, 12, -11161.916, 536.54095, 70.433266, 3.36848, 6000, 705303),
(@PATH, 0, 13, -11155.41, 536.8843, 70.42894, 100,  0,  0),
(@PATH, 0, 14, -11153.562, 533.9012, 70.42189, 100,  0,  0),
(@PATH, 0, 15, -11146.808, 528.71625, 70.477196, 100,  0,  0),
(@PATH, 0, 16, -11139.436, 528.66187, 70.50565, 100,  0,  0),
(@PATH, 0, 17, -11134.32, 532.9369, 70.562805, 100,  0,  0),
(@PATH, 0, 18, -11131.548, 536.63214, 70.47361, 100,  0,  0),
(@PATH, 0, 19, -11129.091, 540.075, 70.47177, 100,  0,  0),
(@PATH, 0, 20, -11128.235, 543.1552, 70.45672, 100,  4000,  705304),
(@PATH, 1, 1, -11133.434, 550.86005, 70.381966, 100,  0,  0),
(@PATH, 1, 2, -11131.567, 548.74554, 70.42528, 100,  0,  0),
(@PATH, 1, 3, -11130.786, 544.9505, 70.41748, 100,  0,  0),
(@PATH, 1, 4, -11131.364, 542.09845, 70.433556, 100,  0,  0),
(@PATH, 1, 5, -11134.433, 537.0684, 70.441444, 100,  0,  0),
(@PATH, 1, 6, -11137.308, 534.6409, 70.43133, 100,  0,  0),
(@PATH, 1, 7, -11141.096, 533.334, 70.433655, 100,  0,  0),
(@PATH, 1, 8, -11134.433, 537.0684, 70.441444, 100,  0,  0),
(@PATH, 1, 9, -11132.151, 539.1321, 70.44842, 100,  0,  0),
(@PATH, 1, 10, -11130.786, 544.9505, 70.41748, 100,  0,  0),
(@PATH, 1, 11, -11131.174, 546.92267, 70.44154, 100,  0,  0),
(@PATH, 1, 12, -11133.434, 550.86005, 70.381966, 100,  0,  0),
(@PATH, 1, 13, -11130.786, 544.9505, 70.41748, 100,  0,  0),
(@PATH, 1, 14, -11132.151, 539.1321, 70.44842, 100,  0,  0),
(@PATH, 1, 15, -11134.433, 537.0684, 70.441444, 100,  0,  0),
(@PATH, 1, 16, -11137.308, 534.6409, 70.43133, 100,  0,  0),
(@PATH, 1, 17, -11141.096, 533.334, 70.433655, 100,  0,  0),
(@PATH, 1, 18, -11134.433, 537.0684, 70.441444, 100,  0,  0),
(@PATH, 1, 19, -11132.151, 539.1321, 70.44842, 100,  0,  0),
(@PATH, 1, 20, -11130.786, 544.9505, 70.41748, 100,  0,  0),
(@PATH, 1, 21, -11131.174, 546.92267, 70.44154, 100,  0,  0);

DELETE FROM dbscripts_on_creature_movement WHERE id IN (705301, 705302, 705303, 705304);
INSERT INTO dbscripts_on_creature_movement (id, delay, priority, command, datalong, datalong2, buddy_entry, search_radius, dataint, dataint2,x, y, z, comments) VALUES 
('705301', '1000', '0', '1', '16', '0', '0','0', '0', '0', '0', '0','0','Klaven Mortwake - Emote Kneel'),
('705301', '10000', '1', '0', '0', '0', '0','0', '3094', '0', '0', '0','0','Klaven Mortwake - Talk'),
('705301', '17000', '1', '0', '0', '0', '0','0', '3095', '0', '0', '0','0','Klaven Mortwake - Talk'),
('705301', '23000', '0', '1', '5', '0', '0','0', '0', '0', '0', '0','0','Klaven Mortwake - Emote Exclamation'),
('705301', '23000', '1', '0', '0', '0', '0','0', '3093', '0', '0', '0','0','Klaven Mortwake - Talk'),
('705302', '4000', '0', '0', '0', '0', '0','0', '3097', '0', '0', '0','0','Klaven Mortwake - Talk'),
('705303', '0', '0', '0', '0', '0', '0','0', '3098', '0', '0', '0','0','Klaven Mortwake - Talk'),
('705304', '2000', '0', '20', '2', '1', '0','0', '0', '0', '0', '0','0','Klaven Mortwake - Set WaypointPath 1');

-- Defias Tower Sentry
-- Correct Spawns and add them into spawn_group for correct movement
-- Side note: they spawn side by side but move linear SPAWN_GROUP_FORMATION_TYPE_SINGLE_FILE
UPDATE creature SET position_x='-11129.781', position_y='548.0863', position_z='61.728893', orientation='1.98334' WHERE (guid='66995');
UPDATE creature SET position_x='-11131.747', position_y='547.9329', position_z='61.673286', orientation='1.92729' WHERE (guid='66994');

DELETE FROM spawn_group WHERE Id='19003';
INSERT INTO spawn_group (Id, Name, Type, MaxCount, WorldState, Flags) VALUES 
('19003', 'Westfall - Defias Tower Sentry (2) Patrol 000', '0', '2', '0', '0');

DELETE FROM spawn_group_formation WHERE Id='19003';
INSERT INTO spawn_group_formation (Id, FormationType, FormationSpread, FormationOptions, PathId, MovementType, Comment) VALUES 
('19003', '1', '2', '0', '19003', '2', 'Westfall - Defias Tower Sentry (2) Patrol 000');

DELETE FROM spawn_group_spawn WHERE Id='19003';
INSERT INTO spawn_group_spawn (Id, Guid, SlotId) VALUES 
('19003', '66995', '0'),
('19003', '66994', '1');

SET @PATH := 19003; -- spawn_group due to formation pathing
DELETE FROM waypoint_path WHERE PathId=@PATH;
INSERT INTO waypoint_path (PathId, Point, PositionX, PositionY, PositionZ, WaitTime, ScriptId) VALUES 
(@PATH,1,-11137.872,556.66394,61.719536,0, 0),
(@PATH,2,-11144.089,557.5722,61.71954,0, 0),
(@PATH,3,-11150.329,555.53625,61.719536,0, 0),
(@PATH,4,-11154.313,552.1036,61.765198,0, 0),
(@PATH,5,-11156.641,544.77435,61.719536,0, 0),
(@PATH,6,-11155.098,537.7074,61.719536,0, 0),
(@PATH,7,-11149.677,531.89526,61.762802,0, 0),
(@PATH,8,-11145.469,530.3515,61.762802,0, 0),
(@PATH,9,-11142.669,529.8012,61.762802,0, 0),
(@PATH,10,-11140.158,529.242,61.762802,0, 0),
(@PATH,11,-11135.568,530.64386,61.762802,0, 0),
(@PATH,12,-11131.786,533.37646,61.719536,0, 0),
(@PATH,13,-11130.454,537.54376,61.719536,0, 0),
(@PATH,14,-11129.113,544.04553,61.719536,0, 0),
(@PATH,15,-11131.182,551.28595,61.71954,0, 0),
(@PATH,16,-11133.829,554.5059,61.719536,0, 0);

REPLACE INTO waypoint_path_name (PathId, Name) VALUES (19003, 'Westfall - Defias Tower Sentry (2) Patrol 000');

-- Defias Power Patrol
-- Entry: 7052 Low: 7609870
UPDATE creature SET position_x='-11131.519', position_y='540.82355', position_z='49.30846', orientation='2.80998' WHERE (guid='66991');

SET @PATH := 7052; -- creatures
DELETE FROM creature_movement_template WHERE Entry=@PATH;
INSERT INTO creature_movement_template (Entry, PathId, Point, PositionX, PositionY, PositionZ, Orientation, WaitTime, ScriptId) VALUES  
(@PATH,0,1,-11131.658,549.87164,50.493183,100, 0, 0),
(@PATH,0,2,-11136,554.8301,52.66208,100, 0, 0),
(@PATH,0,3,-11140.383,556.89435,53.992172,100, 0, 0),
(@PATH,0,4,-11144.682,556.6825,55.282417,100, 0, 0),
(@PATH,0,5,-11149.117,554.4657,56.05738,100, 0, 0),
(@PATH,0,6,-11152.269,552.6805,55.919537,100, 0, 0),
(@PATH,0,7,-11144.682,556.6825,55.282417,100, 0, 0),
(@PATH,0,8,-11140.383,556.89435,53.992172,100, 0, 0),
(@PATH,0,9,-11136,554.8301,52.66208,100, 0, 0),
(@PATH,0,10,-11131.658,549.87164,50.493183,100, 0, 0),
(@PATH,0,11,-11130.728,546.13043,49.522034,100, 0, 0),
(@PATH,1,1,-11131.519, 540.82355, 49.395847,100, 1000, 0),
(@PATH,1,2,-11131.519, 540.82355, 49.395847,2.80998, 10000, 705202);

-- Entry: 7052 Low: 7609979
UPDATE creature SET position_x='-11142.518', position_y='556.2102', position_z='36.04322', orientation='3.071779' WHERE (guid='66988');
SET @PATH := 66988;
DELETE FROM creature_movement WHERE Id=@PATH;
INSERT INTO creature_movement (Id, Point, PositionX, PositionY, PositionZ, Orientation, WaitTime, ScriptId) VALUES 
(@PATH,1,-11142.518,556.2102,36.04322,3.228859,6000,0),
(@PATH,2,-11149.39,554.4795,38.767456,100, 0, 0),
(@PATH,3,-11152.168,551.7051,40.31828,100, 0, 0),
(@PATH,4,-11154.249,547.9043,40.71954,100, 0, 0),
(@PATH,5,-11152.688,546.27094,40.71954,100, 0, 0),
(@PATH,6,-11150.508,546.6263,40.746307,100, 1000, 0),
(@PATH,7,-11150.508,546.6263,40.746307,0.925024,5000,0),
(@PATH,8,-11145.182,550.96234,44.038548,100, 0, 0),
(@PATH,9,-11143.321,551.0007,44.9791,100, 0, 0),-- Custom 
(@PATH,10,-11142.32,550.67505,45.527344,100, 0, 0),
(@PATH,11,-11138.388,548.9962,46.550243,100, 0, 0),
(@PATH,12,-11139.768,547.17053,46.82856,100, 0, 0),
(@PATH,13,-11144.661,541.09973,45.77231,100, 0, 0),
(@PATH,14,-11148.352,534.8574,43.51953,100, 1000, 0),
(@PATH,15,-11148.352,534.8574,43.51953,5.829399,4000,0),
(@PATH,16,-11142.622,531.69476,43.42424,100, 0, 0),
(@PATH,17,-11137.193,532.86816,41.797604,100, 0, 0),
(@PATH,18,-11132.867,536.17535,39.90682,100, 0, 0),
(@PATH,19,-11130.917,541.1406,37.985565,100, 0, 0),
(@PATH,20,-11130.518,545.5177,36.39389,100, 8000, 0),
(@PATH,21,-11132.004,538.6341,38.991142,100, 0, 0),
(@PATH,22,-11134.382,535.2879,40.437794,100, 0, 0),
(@PATH,23,-11138.259,532.5661,42.203865,100, 0, 0),
(@PATH,24,-11142.896,531.95325,43.44031,100, 0, 0),
(@PATH,25,-11146.107,532.32324,43.562805,100, 0, 0),
(@PATH,26,-11149.354,534.1084,43.51953,100, 0, 0),
(@PATH,27,-11147.189,537.71747,44.41644,100, 0, 0),
(@PATH,28,-11145.317,540.5381,45.565903,100, 0, 0),
(@PATH,29,-11142.637,543.8357,46.519302,100, 0, 0),
(@PATH,30,-11141.239,545.33966,46.6472,100, 0, 0),
(@PATH,31,-11135.174,542.15894,48.87623,100, 7000, 705201),
(@PATH,32,-11140.996,544.7651,46.654182,100, 0, 0),
(@PATH,33,-11139.294,548.42773,46.726612,100, 0, 0),
(@PATH,34,-11142.32,550.67505,45.527344,100, 0, 0),-- custom 
(@PATH,35,-11143.321,551.0007,44.9791,100, 0, 0),
(@PATH,36,-11145.418,550.83875,43.933857,100, 0, 0),
(@PATH,37,-11150.94,545.9385,40.71954,100, 0, 0),
(@PATH,38,-11153.174,547.23285,40.71954,100, 0, 0),
(@PATH,39,-11153.329,550.5076,40.719536,100, 0, 0),
(@PATH,40,-11151.308,554.1048,39.490963,100, 0, 0),
(@PATH,41,-11147.854,555.6173,38.10262,100, 0, 0),
(@PATH,42,-11144.299,556.82306,36.811623,100, 0, 0),
(@PATH,43,-11142.661,556.47095,36.11953,100, 0, 0);

UPDATE creature_movement SET comment='Custom Point, MMAP Issues' WHERE id=66988 AND point IN (9,34);

DELETE FROM dbscripts_on_creature_movement WHERE id IN (705201, 705202);
INSERT INTO dbscripts_on_creature_movement (id, delay, priority, command, datalong, datalong2, buddy_entry, search_radius, dataint, dataint2,x, y, z, o, comments) VALUES 
('705201', '6000', '0', '31', '7052', '25', '0','0', '-26000', '0', '0', '0','0', '0','Defias Patrol - Jill - Search for Raven'),
('705201', '6000', '1', '32', '1', '0', '0','0', '0', '0', '0', '0','0', '0','Defias Patrol - Jill - Pause Waypoint'),
('705201', '6000', '2', '21', '1', '0', '0','0', '0', '0', '0', '0','0', '0','Defias Patrol - Jill - Set Active'),
('705201', '6000', '3', '21', '1', '0','7052', '25', '0', '0', '0', '0','0', '0','Defias Patrol - Raven - Set Active'),
('705201', '7000', '0', '0', '0', '0', '0','0', '3126', '0', '0','0','0', '0','Defias Patrol - Jill - Say text'),
('705201', '12000', '0', '25', '1', '0', '7052', '25', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Set Run'),
('705201', '12000', '1', '20', '2', '1', '7052', '25', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Move'),
('705202', '0', '0', '32', '1', '0', '0','0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Pause Waypoint'),
('705202', '2000', '0', '1', '6', '0', '0','0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Emote Question'),
('705202', '2000', '1', '0', '0', '0', '0','0', '3127', '0', '0','0','0', '0','Defias Patrol - Raven - Say text'),
('705202', '5000', '0', '3', '0', '0', '7052','20', '0', '0', '0','0','0', '1.44862','Defias Patrol - Jill - Facing'),
('705202', '5000', '1', '1', '25', '0', '7052','20', '0', '0', '0','0','0', '0','Defias Patrol - Jill - Emote Point'),
('705202', '5000', '2', '0', '0', '0', '7052','20', '3128', '0', '0','0','0', '0','Defias Patrol - Jill - Say text'),
('705202', '8000', '0', '3', '0', '0', '7052','20', '0', '0', '0','0','0', '6.02138','Defias Patrol - Jill - Facing'),
('705202', '8000', '1', '1', '1', '0', '7052','20', '0', '0', '0','0','0', '0','Defias Patrol - Jill - Emote talk'),
('705202', '8000', '2', '0', '0', '0', '7052','20', '4018', '0', '0','0','0', '0','Defias Patrol - Jill - Say text'),
('705202', '11000', '0', '3', '0', '0', '7052','20', '0', '0', '0','0','0', '5.84685','Defias Patrol - Jill - Facing'),
('705202', '16000', '0', '1', '1', '0', '0','0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Emote talk'),
('705202', '16000', '1', '0', '0', '0', '0','0','3129', '0', '0','0','0', '0','Defias Patrol - Raven - Say text'),
('705202', '23000', '0', '1', '1', '0', '7052','20', '0', '0', '0','0','0', '0','Defias Patrol - Jill - Emote talk'),
('705202', '23000', '2', '0', '0', '0', '7052','20', '3130', '0', '0','0','0', '0','Defias Patrol - Jill - Say text'),
('705202', '30000', '0', '21', '0', '0', '7052','20', '0', '0', '0','0','0', '0','Defias Patrol - Jill - Remove Active'),
('705202', '30000', '1', '32', '0', '0', '7052','20', '0', '0', '0','0','0', '0','Defias Patrol - Jill - Unpause Waypoint'),
('705202', '51000', '0', '21', '0', '0', '0', '0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Remove Active'),
('705202', '51000', '1', '25', '0', '0', '0', '0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Remove Run'),
('705202', '51000', '2', '20', '2', '0', '0', '0', '0', '0', '0','0','0', '0','Defias Patrol - Raven - Move');
